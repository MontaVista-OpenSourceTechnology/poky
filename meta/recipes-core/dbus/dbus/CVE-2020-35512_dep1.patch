From 190fb8edafc957f9c26511386d00b1b219d7c083 Mon Sep 17 00:00:00 2001
From: Simon McVittie <smcv@collabora.com>
Date: Wed, 23 Jan 2019 12:09:04 +0000
Subject: [PATCH 1/4] _dbus_user_database_get_gid: Remove unused function

Signed-off-by: Simon McVittie <smcv@collabora.com>

Upstream-Status: Backport [https://gitlab.freedesktop.org/dbus/dbus/-/commit/ffa34d6a545afc78781709e848d74a2d3e1cb14b]
CVE: CVE-2020-35512 #dep-1
Signed-off-by: Milan Shah <mshah@mvista.com>
---
 dbus/dbus-userdb-util.c | 21 ---------------------
 dbus/dbus-userdb.h      |  4 ----
 2 files changed, 25 deletions(-)

diff --git a/dbus/dbus-userdb-util.c b/dbus/dbus-userdb-util.c
index 888a23e..8948778 100644
--- a/dbus/dbus-userdb-util.c
+++ b/dbus/dbus-userdb-util.c
@@ -354,27 +354,6 @@ _dbus_user_database_get_groupname (DBusUserDatabase     *db,
 }
 
 /**
- * Gets the user information for the given GID,
- * returned group info should not be freed. 
- *
- * @param db user database
- * @param gid the group ID
- * @param info return location for const ref to group info
- * @param error error location
- * @returns #FALSE if error is set
- */
-dbus_bool_t
-_dbus_user_database_get_gid (DBusUserDatabase     *db,
-                             dbus_gid_t            gid,
-                             const DBusGroupInfo **info,
-                             DBusError            *error)
-{
-  *info = _dbus_user_database_lookup_group (db, gid, NULL, error);
-  return *info != NULL;
-}
-
-
-/**
  * Gets all groups  corresponding to the given UID. Returns #FALSE
  * if no memory, or user isn't known, but always initializes
  * group_ids to a NULL array. 
diff --git a/dbus/dbus-userdb.h b/dbus/dbus-userdb.h
index 53fc90b..38ce5c1 100644
--- a/dbus/dbus-userdb.h
+++ b/dbus/dbus-userdb.h
@@ -61,10 +61,6 @@ dbus_bool_t       _dbus_user_database_get_uid       (DBusUserDatabase     *db,
                                                      dbus_uid_t            uid,
                                                      const DBusUserInfo  **info,
                                                      DBusError            *error);
-dbus_bool_t       _dbus_user_database_get_gid       (DBusUserDatabase     *db,
-                                                     dbus_gid_t            gid,
-                                                     const DBusGroupInfo **info,
-                                                     DBusError            *error);
 DBUS_PRIVATE_EXPORT
 dbus_bool_t       _dbus_user_database_get_username  (DBusUserDatabase     *db,
                                                      const DBusString     *username,
-- 
2.7.4


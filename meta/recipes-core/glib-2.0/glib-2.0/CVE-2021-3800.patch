libcharset: Drop a redundant environment variable

It was used for running tests when we built with autotools, but is no
longer used in the Meson build system. If we need something similar in
future, it should be done by adding internal API to override the
directory on a per-call basis, rather than loading a path from a shared
global table every time.

Signed-off-by: Philip Withnall's avatarPhilip Withnall <withnall@endlessm.com>

Helps: #1919

Upstream-Status: Backport
CVE: CVE-2021-3800
Signed-off-by: Armin Kuster <akuster@mvista.com>


Index: glib-2.58.0/glib/libcharset/localcharset.c
===================================================================
--- glib-2.58.0.orig/glib/libcharset/localcharset.c
+++ glib-2.58.0/glib/libcharset/localcharset.c
@@ -117,11 +117,7 @@ _g_locale_get_charset_aliases (void)
       const char *base = "charset.alias";
       char *file_name;
 
-      /* Make it possible to override the charset.alias location.  This is
-	 necessary for running the testsuite before "make install".  */
-      dir = getenv ("CHARSETALIASDIR");
-      if (dir == NULL || dir[0] == '\0')
-	dir = relocate (GLIB_CHARSETALIAS_DIR);
+	  dir = relocate (GLIB_CHARSETALIAS_DIR);
 
       /* Concatenate dir and base into freshly allocated file_name.  */
       {
